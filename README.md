# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞

**–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ò–¢–ú–û**  
**–§–∞–∫—É–ª—å—Ç–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏**  
**–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤
**–°—Ç—É–¥–µ–Ω—Ç:** –ê—Å–∫–∞—Ä–æ–≤ –≠–º–∏–ª—å –†–∞–º–∏–ª–µ–≤–∏—á  
**–ì—Ä—É–ø–ø–∞:** P3310  
**–ì–æ–¥:** 2024 5

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

–¶–µ–ª—å—é —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –¥–ª—è –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω–æ–≥–æ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ANTLR4.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —è–∑—ã–∫—É:

‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** —Å —è–≤–Ω—ã–º –∑–∞–¥–∞–Ω–∏–µ–º —Ç–∏–ø–æ–≤ (int, float, string)  
‚úÖ **–ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è** —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ç–∏–ø–æ–≤  
‚úÖ **–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (+, -, *, /, %)  
‚úÖ **–û–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è** (<, <=, >, >=, ==, !=)  
‚úÖ **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (&&, ||, !)  
‚úÖ **–û–ø–µ—Ä–∞—Ç–æ—Ä –≤–µ—Ç–≤–ª–µ–Ω–∏—è** if/else  
‚úÖ **–¶–∏–∫–ª while**  
‚úÖ **–û–ø–µ—Ä–∞—Ç–æ—Ä –≤—ã–≤–æ–¥–∞** print  

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

‚ú® **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:** int, float, string  
‚ú® **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤** (int ‚Üí float ‚Üí string)  
‚ú® **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–æ–∫** (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è, –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ)  
‚ú® **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏  

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab-4/
‚îú‚îÄ‚îÄ Expr.g4              # –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ —è–∑—ã–∫–∞ (ANTLR4)
‚îú‚îÄ‚îÄ Driver.py            # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ Interpreter.py       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ (Visitor)
‚îú‚îÄ‚îÄ ExprParser.py        # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
‚îú‚îÄ‚îÄ ExprLexer.py         # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–µ–∫—Å–µ—Ä
‚îú‚îÄ‚îÄ ExprVisitor.py       # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Visitor
‚îú‚îÄ‚îÄ examples/            # –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º
‚îÇ   ‚îú‚îÄ‚îÄ fibonacci.txt    # –ß–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ gcd.txt         # –ê–ª–≥–æ—Ä–∏—Ç–º –ï–≤–∫–ª–∏–¥–∞ (–ù–û–î)
‚îÇ   ‚îî‚îÄ‚îÄ types_demo.txt  # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
antlr4 -Dlanguage=Python3 -visitor Expr.g4
```

### –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞

```bash
python Driver.py input.txt
```

---

## üßÆ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º

### 1. –ß–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏ (`examples/fibonacci.txt`)

```javascript
// –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è n-–≥–æ —á–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏
int n = 10;
int a = 0;
int b = 1;
int i = 2;

print(a);
print(b);

while (i <= n) {
    int temp = a + b;
    print(temp);
    a = b;
    b = temp;
    i = i + 1;
}
```

**–í—ã–≤–æ–¥:** 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55

### 2. –ê–ª–≥–æ—Ä–∏—Ç–º –ï–≤–∫–ª–∏–¥–∞ (`examples/gcd.txt`)

```javascript
// –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ù–û–î (–∞–ª–≥–æ—Ä–∏—Ç–º –ï–≤–∫–ª–∏–¥–∞)
int a = 48;
int b = 18;

print(a);
print(b);

while (b != 0) {
    int temp = b;
    b = a % b;
    a = temp;
}

print(a);  // –ù–û–î
```

**–í—ã–≤–æ–¥:** 48, 18, 6

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **Visitor**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- üéØ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –æ–±—Ö–æ–¥–∞ AST –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- üîÑ –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- üêõ –õ–µ–≥–∫—É—é –æ—Ç–ª–∞–¥–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤

| –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ |
|-----|----------------------|------------------|
| `int` | 0 | ‚Üí `float`, ‚Üí `string` |
| `float` | 0.0 | ‚Üí `string` |
| `string` | "" | –ù–µ—Ç |

### –°–µ–º–∞–Ω—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

#### –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏:
- **–°–ª–æ–∂–µ–Ω–∏–µ:** –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ (`'Hello' + 'World'` ‚Üí `'HelloWorld'`)
- **–£–º–Ω–æ–∂–µ–Ω–∏–µ:** –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ (`'*' * 3` ‚Üí `'***'`)
- **–í—ã—á–∏—Ç–∞–Ω–∏–µ:** —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∏

#### –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- **–ò—Å—Ç–∏–Ω–∞:** –ª—é–±–æ–µ —á–∏—Å–ª–æ ‚â† 0, –Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- **–õ–æ–∂—å:** 0, 0.0, –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

```bash
# –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
python Driver.py input.txt

# –ß–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏
python Driver.py examples/fibonacci.txt

# –ù–û–î
python Driver.py examples/gcd.txt

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
python Driver.py examples/types_demo.txt
```
